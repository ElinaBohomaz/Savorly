<Window x:Class="Savorly.Views.NotebookWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Savorly - Записник" 
        WindowState="Maximized"
        WindowStartupLocation="CenterOwner"
        Background="White"
        ResizeMode="CanResize"
        WindowStyle="SingleBorderWindow">

    <Window.Resources>
        <Style x:Key="NotebookItemStyle" TargetType="ListBoxItem">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E8E8E8"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Background="White" Padding="30,20" BorderBrush="#E8E8E8" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button 
                       Content="← Назад до профілю" 
                       Background="Transparent" 
                       BorderThickness="0"
                       FontSize="16" 
                       FontWeight="SemiBold" 
                       Foreground="#666"
                       HorizontalAlignment="Center" 
                       Click="BackButton_Click" Height="36" VerticalAlignment="Top" Margin="0,73,0,0">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Cursor" Value="Hand"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F8F9FA"/>
                                    <Setter Property="Foreground" Value="#CC5500"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                    <Border Background="#FFE8D6" 
                            Width="400" 
                            Height="80" 
                            CornerRadius="40"
                            BorderBrush="#FFD1B2" 
                            BorderThickness="2">
                        <TextBlock Text="📝 Записник" 
                                  FontSize="36" 
                                  FontWeight="Bold" 
                                  Foreground="#CC5500"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Ваш список покупок" 
                              FontSize="14" 
                              Foreground="#666"
                              HorizontalAlignment="Center"
                              Margin="0,10,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid Background="White" Margin="30,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0" Background="White" Margin="0,0,20,0">
                    <StackPanel>
                        <Border Background="#FFF9F5" CornerRadius="12" BorderBrush="#FFE8D6" BorderThickness="1" Margin="0,0,0,20">
                            <StackPanel Orientation="Horizontal" Margin="25,20">
                                <TextBlock Text="Список продуктів" 
                                          FontSize="20" 
                                          FontWeight="SemiBold" 
                                          Foreground="#333"/>
                                <TextBlock x:Name="ItemsCountText" 
                                          Text=" (0)" 
                                          FontSize="20" 
                                          FontWeight="Bold" 
                                          Foreground="#CC5500" 
                                          Margin="10,0,0,0"/>
                            </StackPanel>
                        </Border>
                        <ListBox x:Name="NotebookListBox" 
                                Background="Transparent" 
                                BorderThickness="0"
                                ItemContainerStyle="{StaticResource NotebookItemStyle}"
                                ScrollViewer.VerticalScrollBarVisibility="Auto"
                                Height="500">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="White" 
                                            Margin="0,0,0,12" 
                                            CornerRadius="12"
                                            BorderBrush="#F0F0F0" 
                                            BorderThickness="1">
                                        <Grid Margin="25,20">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox Grid.Column="0" 
                                                     VerticalAlignment="Center"
                                                     Margin="0,0,20,0"
                                                     Checked="CheckBox_Checked"
                                                     Unchecked="CheckBox_Unchecked">
                                                <CheckBox.Style>
                                                    <Style TargetType="CheckBox">
                                                        <Setter Property="Cursor" Value="Hand"/>
                                                        <Setter Property="Width" Value="20"/>
                                                        <Setter Property="Height" Value="20"/>
                                                    </Style>
                                                </CheckBox.Style>
                                            </CheckBox>
                                            <TextBlock Grid.Column="1" 
                                                      Text="{Binding Name}" 
                                                      FontSize="16"
                                                      VerticalAlignment="Center"
                                                      TextWrapping="Wrap">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Foreground" Value="#333"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsChecked}" Value="True">
                                                                <Setter Property="Foreground" Value="#999"/>
                                                                <Setter Property="TextDecorations" Value="Strikethrough"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                            <Button Grid.Column="2" 
                                                   Content="✕" 
                                                   Background="Transparent" 
                                                   Foreground="#999"
                                                   FontSize="14" 
                                                   FontWeight="Bold"
                                                   Width="32" 
                                                   Height="32" 
                                                   BorderThickness="0"
                                                   Click="DeleteItem_Click">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Cursor" Value="Hand"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="#FFF5F5"/>
                                                                <Setter Property="Foreground" Value="#FF4444"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                            </Button>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        <Border Background="#FFF9F5" CornerRadius="12" BorderBrush="#FFE8D6" BorderThickness="1" Margin="0,20,0,0">
                            <StackPanel Orientation="Horizontal" Margin="25,20">
                                <TextBox x:Name="NewItemTextBox" 
                                        FontSize="16" 
                                        Height="50" 
                                        VerticalContentAlignment="Center"
                                        Width="400"
                                        KeyDown="NewItemTextBox_KeyDown">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="TextBox">
                                                        <Border Background="White"
                                                                BorderBrush="#E8E8E8"
                                                                BorderThickness="1"
                                                                CornerRadius="8">
                                                            <ScrollViewer x:Name="PART_ContentHost"
                                                                          Margin="15,0"
                                                                          Background="Transparent"/>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>

                                <Button Content="Додати продукт" 
                                       Background="#FFE8D6" 
                                       Foreground="#CC5500" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Height="50" 
                                       Margin="15,0,0,0" 
                                       BorderThickness="0"
                                       Click="AddCustomItem_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="8">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20,0"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
                <Border Grid.Column="1" Background="#F8F9FA" BorderBrush="#E8E8E8" BorderThickness="1,0,0,0">
                    <StackPanel Margin="25">
                        <Border Background="#FFF9F5" CornerRadius="12" BorderBrush="#FFE8D6" BorderThickness="1" Margin="0,0,0,25">
                            <StackPanel Margin="25,20">
                                <TextBlock Text="📊 Статистика" 
                                          FontSize="18" 
                                          FontWeight="SemiBold" 
                                          Foreground="#333"
                                          Margin="0,0,0,15"/>

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="Всього продуктів:" FontSize="14" Foreground="#666" Width="150"/>
                                    <TextBlock x:Name="TotalCountText" Text="0" FontSize="14" FontWeight="SemiBold" Foreground="#333"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="Куплено:" FontSize="14" Foreground="#666" Width="150"/>
                                    <TextBlock x:Name="CompletedCountText" Text="0" FontSize="14" FontWeight="SemiBold" Foreground="#00AA00"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Залишилось купити:" FontSize="14" Foreground="#666" Width="150"/>
                                    <TextBlock x:Name="RemainingCountText" Text="0" FontSize="14" FontWeight="SemiBold" Foreground="#CC5500"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <StackPanel Margin="0,0,0,25">
                            <Border Background="#FFE8D6" CornerRadius="8" Margin="0,0,0,12">
                                <Button Content="✅ Очистити куплені" 
                                       Background="Transparent" 
                                       Foreground="#CC5500"
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Height="55" 
                                       BorderThickness="0"
                                       Click="ClearCompleted_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="8">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Border>

                            <Border Background="#FFF0E6" CornerRadius="8" Margin="0,0,0,12">
                                <Button Content="🗑️ Очистити все" 
                                       Background="Transparent" 
                                       Foreground="#CC5500"
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Height="55" 
                                       BorderThickness="0"
                                       Click="ClearAll_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="8">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Border>

                            <Border Background="#FFECE6" CornerRadius="8">
                                <Button Content="🖨️ Друк списку" 
                                       Background="Transparent" 
                                       Foreground="#CC5500"
                                       FontSize="16" 
                                       FontWeight="SemiBold"
                                       Height="55" 
                                       BorderThickness="0"
                                       Click="PrintList_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="8">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Border>
                        </StackPanel>

                        <Border Background="#FFF9F5" CornerRadius="12" BorderBrush="#FFE8D6" BorderThickness="1">
                            <StackPanel Margin="25,20">
                                <TextBlock Text="💡 Порада" 
                                          FontSize="16" 
                                          FontWeight="SemiBold" 
                                          Foreground="#333"
                                          Margin="0,0,0,10"/>
                                <TextBlock Text="Натискайте на флажок, щоб відмітити куплений продукт. Видаляйте непотрібні продукти кнопкою ✕"
                                          FontSize="14" 
                                          Foreground="#666" 
                                          TextWrapping="Wrap"
                                          LineHeight="20"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>